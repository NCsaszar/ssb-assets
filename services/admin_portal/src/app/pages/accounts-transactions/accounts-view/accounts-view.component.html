<div class="component-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title class="mat-card-title">Accounts</mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>

    <div class="filters-container" [formGroup]="startEndRange">
      <div class="filter-box">
        <mat-form-field>
          <mat-label>Account Type</mat-label>
          <mat-select formControlName="accountType">
            <mat-option *ngFor="let type of accountTypes" [value]="type">
              {{ type }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Min Balance</mat-label>
          <input
            matInput
            placeholder="Min Balance"
            formControlName="minBalance"
            type="number"
          />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Max Balance</mat-label>
          <input
            matInput
            placeholder="Max Balance"
            formControlName="maxBalance"
            type="number"
          />
        </mat-form-field>
        <mat-form-field color="primary">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            [rangePicker]="picker"
            [formGroup]="startEndRange"
          >
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input matEndDate formControlName="end" placeholder="End date" />
          </mat-date-range-input>
          <mat-hint class="date-hint">MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
        <div class="search-container">
          <mat-form-field appearance="outline">
            <input matInput placeholder="First Name" />
            <button
              matSuffix
              mat-icon-button
              aria-label="Search"
              color="primary"
            >
              <mat-icon>search</mat-icon>
            </button>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <input matInput placeholder="Last Name" />
            <button
              matSuffix
              mat-icon-button
              aria-label="Search"
              color="primary"
            >
              <mat-icon>search</mat-icon>
            </button>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="clear-filters">
      <button mat-stroked-button class="clear-filters" (click)="clearFilters()">
        Clear Filters
      </button>
    </div>
    <div [formGroup]="startEndRange" class="slide-toggle">
      <mat-slide-toggle formControlName="isActive">Active</mat-slide-toggle>
    </div>
    <mat-card-content>
      <table
        matSort
        class="mat-elevation-z8"
        mat-table
        [dataSource]="dataSource"
      >
        <ng-container matColumnDef="accountNumber">
          <th mat-header-cell *matHeaderCellDef>Account Number</th>
          <td mat-cell *matCellDef="let element">
            {{ element.accountNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="userId">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let element">{{ element.userId }}</td>
        </ng-container>

        <ng-container matColumnDef="accountType">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
            Account Type
          </th>
          <td mat-cell *matCellDef="let element">{{ element.accountType }}</td>
        </ng-container>

        <ng-container matColumnDef="balance">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>Balance</th>
          <td mat-cell *matCellDef="let element">
            {{ element.balance | currency : "USD" : true : "1.2-2" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="createdAt">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
            Date Created
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.createdAt | date : "medium" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="isActive">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element">
            <span [ngClass]="element.isActive ? 'status-true' : 'status-false'">
              {{ element.isActive ? "Active" : "Inactive" }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let element">
            <button
              *ngIf="!element.isActive"
              class="small-button green-button"
              mat-stroked-button
              (click)="activateAccount(element.accountId)"
            >
              Activate
            </button>

            <button
              *ngIf="element.isActive"
              class="small-button red-button"
              mat-stroked-button
              (click)="deactivateAccount(element.accountId)"
            >
              Deactivate
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </mat-card-content>
    <br />
    <mat-card-footer>
      <mat-paginator
        [pageSizeOptions]="[5, 10, 25, 100]"
        showFirstLastButtons
      ></mat-paginator>
    </mat-card-footer>
  </mat-card>
</div>
